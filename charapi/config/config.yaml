mock_mode: false

data_fields:
  # Compliance fields from CharityAPI
  in_pub78:
    source: charityapi
    field: "deductibility"
  is_revoked:
    source: charityapi
    field: "status"
  has_recent_filing:
    source: charityapi
    field: "tax_period"

  # Organization type fields from CharityAPI
  ntee_code:
    source: charityapi
    field: "ntee_cd"
  subsection:
    source: charityapi
    field: "subsection"
  foundation_type:
    source: charityapi
    field: "foundation"
  filing_requirement:
    source: charityapi
    field: "filing_req_cd"
  ruling_year:
    source: charityapi
    field: "ruling"

  # Expense fields remain manual (from Form 990 PDFs)
  program_expenses:
    source: manual
    path: "fiscal_year_2024.expenses.program"
  admin_expenses:
    source: manual
    path: "fiscal_year_2024.expenses.admin"
  fundraising_expenses:
    source: manual
    path: "fiscal_year_2024.expenses.fundraising"

  # Charity Navigator remains manual
  charity_navigator_rating:
    source: manual
    path: "organization.charity_navigator_rating.stars"

  # ProPublica API fields
  total_revenue:
    source: api
  total_expenses:
    source: api

manual_data:
  directory: "manual"
  filename: "brief_manual.yaml"

propublica:
  base_url: "https://projects.propublica.org/nonprofits/api/v2"
  timeout: 30
  mock_mode: false

charityapi:
  base_url: "https://api.charityapi.org/api"
  api_key: "live-3NHN8OvU8tn8Poo67CkMzAXCnMeWIojXD-G176SQl-8-TkgG-iqBFrBpJRO_94WPJrKN-3TmS4OEQvOt"
  timeout: 30
  mock_mode: false

scoring:
  financial:
    program_expense_target: 0.75
    admin_expense_limit: 0.15
    fundraising_expense_limit: 0.15
    program_score_max: 40
    admin_score_max: 20
    fundraising_score_max: 20
    stability_score_max: 20

    # Sector-specific overrides by NTEE major category
    sector_overrides:
      A:  # Arts, Culture, Humanities
        program_expense_target: 0.65
        admin_expense_limit: 0.20
      B:  # Education
        program_expense_target: 0.80
        admin_expense_limit: 0.12
      E:  # Health
        program_expense_target: 0.80
        admin_expense_limit: 0.12
      H:  # Medical Research
        program_expense_target: 0.70
        admin_expense_limit: 0.18
      P:  # Human Services
        program_expense_target: 0.75
        admin_expense_limit: 0.15
      Q:  # International
        program_expense_target: 0.70
        admin_expense_limit: 0.18

  organization_type:
    # 501(c)(3) verification
    non_501c3_penalty: 25

    # Foundation type
    public_charity_code: 15
    private_foundation_penalty: 15

    # Filing requirements
    no_filing_requirement_penalty: 10

    # Organizational maturity
    established_years_threshold: 20
    established_bonus: 5

  compliance:
    not_in_pub78_penalty: 50
    revoked_penalty: 50
    no_recent_filing_penalty: 50

caching:
  enabled: true
  database_path: "cache/charapi_cache.db"
  default_ttl_hours: 24
  propublica_ttl_hours: 24
  charityapi_ttl_hours: 168
  charity_navigator_ttl_hours: 168
  cleanup_on_startup: true